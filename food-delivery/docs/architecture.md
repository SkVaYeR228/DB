# Архітектура системи

Система розроблена як монолітний backend-додаток на Node.js із використанням багатошарової архітектури (Layered Architecture).

## Рівні архітектури (Layers)

### 1. Presentation Layer (API)
**Де знаходиться:** `src/app.js`
**Призначення:** - Приймає HTTP-запити від клієнтів.
- Відповідає за маршрутизацію (Routes).
- Повертає відповіді у форматі JSON.

### 2. Business Logic Layer (Services)
**Де знаходиться:** `src/services/`
**Призначення:** - Містить основну бізнес-логіку програми.
- **OrderService:** Обробляє складні транзакції створення замовлення, валідацію цін.
- **AnalyticsService:** Формує аналітичні звіти.
- **MenuService:** Відповідає за актуальність меню та Soft Delete.

### 3. Data Access Layer (Repositories)
**Де знаходиться:** `src/repositories/`
**Призначення:** - Абстракція над базою даних.
- Виконує прямі запити до БД (CRUD операції).
- Дозволяє відділити логіку SQL/ORM від бізнес-правил.

### 4. Database Layer
**Технології:** PostgreSQL, Prisma ORM
**Призначення:** - Зберігання даних у реляційному вигляді.
- Забезпечення цілісності (Foreign Keys, Constraints).

## Технологічний стек та інфраструктура

### Docker & Containerization
Проєкт повністю контейнеризований. `docker-compose.yml` керує двома сервісами:
1. **API Service**: Node.js додаток (Dockerfile).
2. **Database Service**: PostgreSQL 15.

### Потік даних (Data Flow)
1. **Клієнт** надсилає запит (наприклад, `POST /order`).
2. **App.js** отримує запит і передає дані в **OrderService**.
3. **OrderService** перевіряє бізнес-правила (ціни, наявність) і відкриває транзакцію.
4. **Prisma Client** генерує SQL-запит і відправляє його в **PostgreSQL**.
5. **PostgreSQL** повертає результат, який проходить зворотний шлях до клієнта.